# Python é¡¹ç›®æ¨¡æ¿

ä¸€ä¸ªæ ‡å‡†åŒ–çš„ Python é¡¹ç›®å¼€å‘æ¨¡æ¿ï¼Œé›†æˆäº†é…ç½®ç®¡ç†ã€æ—¥å¿—ç³»ç»Ÿå’Œ Pydantic æ•°æ®éªŒè¯ã€‚

## ç‰¹æ€§

- ğŸ”§ **é…ç½®ç®¡ç†**: åŸºäº YAML çš„é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨ Pydantic è¿›è¡Œæ•°æ®éªŒè¯
- ğŸ“ **æ—¥å¿—ç³»ç»Ÿ**: é›†æˆ Loguruï¼Œæ”¯æŒæ§åˆ¶å°å’Œæ–‡ä»¶è¾“å‡ºï¼Œè‡ªåŠ¨è½®è½¬å’Œå‹ç¼©
- ğŸ—ï¸ **æ ‡å‡†ç»“æ„**: æ¸…æ™°çš„é¡¹ç›®ç›®å½•ç»“æ„ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
- âœ… **ç±»å‹å®‰å…¨**: ä½¿ç”¨ Pydantic æ¨¡å‹ç¡®ä¿é…ç½®æ•°æ®çš„ç±»å‹å®‰å…¨
- ğŸ”„ **å•ä¾‹æ¨¡å¼**: æ—¥å¿—ç®¡ç†å™¨é‡‡ç”¨å•ä¾‹æ¨¡å¼ï¼Œç¡®ä¿å…¨å±€å”¯ä¸€å®ä¾‹

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ config.yaml        # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ examples/              # ä½¿ç”¨ç¤ºä¾‹
â”‚   â”œâ”€â”€ example_config_loader.py
â”‚   â””â”€â”€ example_logger.py
â”œâ”€â”€ src/                   # æºä»£ç 
â”‚   â”œâ”€â”€ core/             # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ config_models.py  # é…ç½®æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ modules/          # ä¸šåŠ¡æ¨¡å—
â”‚   â””â”€â”€ utils/            # å·¥å…·ç±»
â”‚       â”œâ”€â”€ config_loader.py  # é…ç½®åŠ è½½å™¨
â”‚       â””â”€â”€ logger.py         # æ—¥å¿—ç®¡ç†å™¨
â”œâ”€â”€ tmp/                   # ä¸´æ—¶æ–‡ä»¶
â”‚   â””â”€â”€ log/              # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ main.py               # ç¨‹åºå…¥å£
â”œâ”€â”€ pyproject.toml        # é¡¹ç›®é…ç½®
â””â”€â”€ README.md
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python >= 3.12
- uv (æ¨è) æˆ– pip

### å®‰è£…ä¾èµ–

ä½¿ç”¨ uv (æ¨è):
```bash
uv sync
```

æˆ–ä½¿ç”¨ pip:
```bash
pip install -r requirements.txt
```

### è¿è¡Œé¡¹ç›®

```bash
python main.py
```

## æ ¸å¿ƒç»„ä»¶

### 1. é…ç½®ç®¡ç†

é…ç½®ç³»ç»Ÿä½¿ç”¨ Pydantic è¿›è¡Œæ•°æ®éªŒè¯ï¼Œç¡®ä¿é…ç½®çš„æ­£ç¡®æ€§ã€‚

```python
from src.utils.config_loader import get_config_loader

# è·å–é…ç½®åŠ è½½å™¨
loader = get_config_loader()

# éªŒè¯å¹¶åŠ è½½é…ç½®
config = loader.validate_config()

# è·å–æ—¥å¿—é…ç½®
log_config = loader.get_log_config()
```

### 2. æ—¥å¿—ç³»ç»Ÿ

åŸºäº Loguru çš„æ—¥å¿—ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼å’Œè‡ªåŠ¨è½®è½¬ã€‚

```python
from src.utils.logger import get_logger

# è·å–æ—¥å¿—è®°å½•å™¨
logger = get_logger("MODULE_NAME")

# è®°å½•æ—¥å¿—
logger.info("è¿™æ˜¯ä¸€æ¡ä¿¡æ¯æ—¥å¿—")
logger.error("è¿™æ˜¯ä¸€æ¡é”™è¯¯æ—¥å¿—")
```

### 3. é…ç½®æ–‡ä»¶

`config/config.yaml` åŒ…å«æ‰€æœ‰ç³»ç»Ÿé…ç½®ï¼š

```yaml
log:
  log_level: DEBUG
  log_dir: ./tmp/log
  log_file: "server.log"
  rotation: "10 MB"
  retention: "30 days"
  compression: "gz"
  version: "0.1"
```

## ä½¿ç”¨ç¤ºä¾‹

æŸ¥çœ‹ `examples/` ç›®å½•ä¸‹çš„ç¤ºä¾‹æ–‡ä»¶ï¼š

- `example_config_loader.py`: é…ç½®åŠ è½½å™¨ä½¿ç”¨ç¤ºä¾‹
- `example_logger.py`: æ—¥å¿—ç³»ç»Ÿä½¿ç”¨ç¤ºä¾‹

## ä¾èµ–åŒ…

- **loguru**: å¼ºå¤§çš„æ—¥å¿—åº“
- **pydantic**: æ•°æ®éªŒè¯å’Œè®¾ç½®ç®¡ç†
- **pyyaml**: YAML æ–‡ä»¶è§£æ

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æ¨¡å—

1. åœ¨ `src/modules/` ä¸‹åˆ›å»ºæ–°çš„ä¸šåŠ¡æ¨¡å—
2. åœ¨ `src/core/` ä¸‹æ·»åŠ æ ¸å¿ƒåŠŸèƒ½
3. åœ¨ `src/utils/` ä¸‹æ·»åŠ å·¥å…·å‡½æ•°

### æ·»åŠ æ–°é…ç½®

1. åœ¨ `src/models/config_models.py` ä¸­å®šä¹‰æ–°çš„é…ç½®æ¨¡å‹
2. åœ¨ `config/config.yaml` ä¸­æ·»åŠ å¯¹åº”é…ç½®
3. æ›´æ–°é…ç½®åŠ è½½å™¨ä»¥æ”¯æŒæ–°é…ç½®

### æ—¥å¿—ä½¿ç”¨è§„èŒƒ

- ä½¿ç”¨æœ‰æ„ä¹‰çš„æ¨¡å—æ ‡ç­¾: `get_logger("API")`, `get_logger("DATABASE")`
- åˆç†ä½¿ç”¨æ—¥å¿—çº§åˆ«: DEBUG < INFO < WARNING < ERROR < CRITICAL
- è®°å½•å…³é”®æ“ä½œå’Œé”™è¯¯ä¿¡æ¯

### ä»£ç é£æ ¼

éµå¾ª PEP 8 ä»£ç é£æ ¼æŒ‡å—ï¼Œä¿æŒä»£ç æ•´æ´å’Œä¸€è‡´æ€§ã€‚åŸºäºruffè¿›è¡Œä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–ã€‚


## ä½œè€…

wds @ (wdsnpshy@163.com)
